@model kurssienhallinta.Models.ViewModels.TeacherScheduleViewModel

<h2>Viikkoaikataulu</h2>

<table class="schedule-table">
    <thead>
        <tr> 
            <th>Time</th>
            @foreach (var day in Model.WeeklySchedule.Keys.OrderBy(day => GetDayOrder(day)))
            {
                <th>@day</th> <!-- Maanantai – Perjantai -->
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var timeSlot in GetAllTimeSlots()) // Käy läpi kaikki helperfunctionista (alhaalla) tuodut itemit
        {
            <tr>
                <td class="time-slot">@timeSlot.ToString(@"hh\:mm")</td>
                @foreach (var day in Model.WeeklySchedule.Keys.OrderBy(day => GetDayOrder(day)))
{
    <th>@day</th>
}
            </tr>
        }
    </tbody>
</table>

@functions {
    private int GetDayOrder(string day) => day switch
    {
        "Monday" => 1,
        "Tuesday" => 2,
        "Wednesday" => 3,
        "Thursday" => 4,
        "Friday" => 5,
        _ => 6
    };

    // Helper function, joka auttaa kalenterinäkymän luomisessa. Luo List-olion kaikista kurssin ajoista.
    private List<TimeSpan> GetAllTimeSlots()
    {
        var slots = new List<TimeSpan>();
        for (int hour = 8; hour <= 16; hour++)
        {
            slots.Add(new TimeSpan(hour, 0, 0));
        }
        return slots;
    }
}